# 故障症状与诊断手册 - SUPCON AdventureX Factory Simulation

## 📋 概述

本手册为 AI Agent 开发者提供完整的故障诊断指南。在比赛中，Agent 可以观察到**症状**，但需要自行推断**根本原因**并发出正确的**维修指令**。

## 🔧 故障定义表

### 1. 主轴振动异常 (`主轴振动异常`)

| 可能的根本原因 | 维修指令 | 基准维修时间 | 错误诊断惩罚 |
|:-------------|:--------|:-----------|:-----------|
| `bearing_wear` (轴承磨损) | `replace_bearing` | 120 秒 | +100% 维修时间 |
| `bolt_loose` (螺栓松动) | `tighten_bolts` | 30 秒 | +100% 维修时间 |

**说明**: 长期高负荷运行导致轴承磨损，或正常损耗导致螺栓松动。

### 2. 加工精度下降 (`加工精度下降`)

| 可能的根本原因 | 维修指令 | 基准维修时间 | 错误诊断惩罚 |
|:-------------|:--------|:-----------|:-----------|
| `tool_dulling` (刀具钝化) | `replace_tool` | 60 秒 | 引发产品报废 |
| `calibration_drift` (校准偏移) | `recalibrate` | 90 秒 | 引发产品报废 |

**说明**: 刀具达到使用寿命或软件参数错误导致校准偏移。

### 3. AGV路径阻塞 (`AGV路径阻塞`)

| 可能的根本原因 | 维修指令 | 基准维修时间 | 错误诊断惩罚 |
|:-------------|:--------|:-----------|:-----------|
| `temporary_obstacle` (临时障碍物) | `reroute_agv` 或等待 | 自动恢复 30-120s | 任务超时 |
| `positioning_failure` (定位模块失灵) | `reboot_device` | 60 秒 | 任务超时 |

**说明**: 其他AGV或人员占用路径点，或自身硬件故障。

### 4. AGV电量突降 (`AGV电量突降`)

| 可能的根本原因 | 维修指令 | 基准维修时间 | 错误诊断惩罚 |
|:-------------|:--------|:-----------|:-----------|
| `battery_aging` (电池老化) | `force_charge` | 30 秒 | 强制充电停机 |
| `high_load_task` (高负载任务) | `optimize_schedule` | 即时 | 计划调整 |

**说明**: 电池老化是正常现象，高负载任务指搬运重物上坡等。

### 5. 效率异常降低 (`效率异常降低`)

| 可能的根本原因 | 维修指令 | 基准维修时间 | 错误诊断惩罚 |
|:-------------|:--------|:-----------|:-----------|
| `software_overheating` (软件过热) | `reduce_frequency` | 自动恢复 300-600s | 生产周期延长 |
| `insufficient_lubricant` (润滑油不足) | `add_lubricant` | 120 秒 | 生产周期延长 |

**说明**: 持续运行导致软件过热，或机械部件润滑油不足。

## 🎯 Agent 诊断策略建议

### 历史数据分析
- 跟踪设备最近的维修历史
- 刚修好的部件再次损坏概率较低
- 长时间运行的设备更容易出现磨损类故障

### 症状模式识别
- `振动异常` → 通常是机械问题 (轴承/螺栓)
- `精度下降` → 通常是工具/校准问题
- `路径阻塞` → 分析环境和自身状态
- `电量突降` → 考虑负载和电池寿命
- `效率降低` → 分析运行时间和机械状态

### 成本效益分析
- 短时间维修优先: `tighten_bolts` (30s) vs `replace_bearing` (120s)
- 考虑错误诊断的惩罚成本
- 紧急订单时选择临时解决方案

## 📊 MQTT 消息格式

### 接收故障状态 (订阅)
```json
{
  "timestamp": 167762.0,
  "source_id": "StationB",
  "status": "error",
  "symptom": "主轴振动异常",
  "utilization": 0.95,
  "buffer_level": 2
}
```

### 发送维修指令 (发布)
```json
{
  "command_id": "maintenance_001",
  "agent_id": "team_alpha",
  "action": "request_maintenance",
  "target": "StationB",
  "params": {
    "maintenance_type": "replace_bearing"
  }
}
```

## 🏆 评分影响

### 正确诊断
- ✅ 获得基准维修时间
- ✅ 鲁棒性评分 +30% 权重
- ✅ 成本控制良好

### 错误诊断  
- ❌ 维修时间 +100% 或引发其他后果
- ❌ 鲁棒性评分下降
- ❌ 成本大幅增加

## 💡 高级策略

### 预防性维护
- 监控设备运行时间，提前安排维护
- 在低峰期进行非紧急维修

### 多故障并发处理
- 同时只能维修一台设备（资源限制）
- 优先级排序：紧急订单 > 成本效益 > 简单维修

### 自然语言增强
鼓励在 Agent 内部实现自然语言处理链：
```
JSON状态 → NL描述 → AI分析 → NL决策 → JSON指令
```

## 📈 监控指标

跟踪以下指标优化诊断策略：
- 诊断准确率 (目标 >90%)
- 平均恢复时间 (目标 <60s)
- 故障相关成本比例 (目标 <20%)

---
**注意**: 本手册公开给所有参赛者。实际比赛中的根本原因是随机的，Agent 必须基于症状和历史数据进行推断。 