# SUPCON AdventureX Factory Simulation

è¿™æ˜¯ SUPCON AdventureX é»‘å®¢æ¾çš„å·¥å‚ä»¿çœŸåç«¯ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªåŸºäºæ•°å­—å­ªç”ŸæŠ€æœ¯çš„æ™ºèƒ½å·¥å‚ä»¿çœŸå¹³å°ï¼Œå‚èµ›è€…å¯ä»¥å¼€å‘ AI Agent æ¥ä¼˜åŒ–å·¥å‚ç”Ÿäº§æ•ˆç‡ã€å¤„ç†æ•…éšœã€ç®¡ç†èµ„æºã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

- **ä»¿çœŸæ ¸å¿ƒ (SimPy)**: åŸºäºç¦»æ•£äº‹ä»¶ä»¿çœŸçš„å·¥å‚ç¯å¢ƒ
- **MQTT é€šä¿¡**: å®æ—¶çš„è®¾å¤‡çŠ¶æ€å‘å¸ƒå’Œ Agent æŒ‡ä»¤æ¥æ”¶
- **è·¯å¾„å†²çªé¿å…**: AGV æ™ºèƒ½è·¯å¾„ç®¡ç†ï¼Œé˜²æ­¢ç¢°æ’
- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.9+
- uv (Python åŒ…ç®¡ç†å·¥å…·)

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ uv å®‰è£…é¡¹ç›®ä¾èµ–
uv sync
```

### è¿è¡Œä»¿çœŸ

```bash
# å¯åŠ¨å·¥å‚ä»¿çœŸç³»ç»Ÿï¼ˆæ¨èæ–¹å¼ï¼‰
uv run python run_simulation.py

# æˆ–è€…ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼
uv run python src/main.py
```

ç³»ç»Ÿå¯åŠ¨åå°†ä¼šï¼š
- è¿æ¥åˆ° MQTT Broker (`supos-ce-instance1.supos.app:1883`)
- åˆå§‹åŒ–å·¥å‚è®¾å¤‡ï¼ˆ4ä¸ªå·¥ç«™ï¼Œ2ä¸ªAGVï¼‰
- å¼€å§‹ç›‘å¬ Agent æŒ‡ä»¤
- å®šæœŸå‘å¸ƒè®¾å¤‡çŠ¶æ€

### æµ‹è¯•ç³»ç»Ÿ

åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­è¿è¡Œæµ‹è¯• Agentï¼š

```bash
# å‘é€æµ‹è¯•æŒ‡ä»¤ï¼ˆæ¨èæ–¹å¼ï¼‰
uv run python run_mock_agent.py

# æˆ–è€…ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼
uv run python tools/mock_agent.py
```

## ğŸ“¡ MQTT æ¥å£

### è®¢é˜…ä¸»é¢˜ (Agent å¯ä»¥ç›‘å¬)

- `factory/station/{station_id}/status` - å·¥ç«™çŠ¶æ€
- `factory/resource/{agv_id}/status` - AGV çŠ¶æ€  
- `factory/orders/new` - æ–°è®¢å•
- `factory/kpi/update` - KPI æ›´æ–°

### å‘å¸ƒä¸»é¢˜ (Agent å‘é€æŒ‡ä»¤)

- `factory/agent/commands` - Agent æŒ‡ä»¤

### æ”¯æŒçš„æŒ‡ä»¤

```json
{
  "command_id": "unique_id",
  "agent_id": "your_team_id", 
  "action": "move_agv",
  "target": "AGV_1",
  "params": {"destination_id": "P1"}
}
```

æ”¯æŒçš„ action:
- `move_agv` - ç§»åŠ¨ AGV
- `request_maintenance` - è¯·æ±‚è®¾å¤‡ç»´æŠ¤
- `emergency_stop` - ç´§æ€¥åœæ­¢
- `adjust_priority` - è°ƒæ•´è®¢å•ä¼˜å…ˆçº§
- `reroute_order` - é‡æ–°è·¯ç”±è®¢å•

## ğŸ­ å·¥å‚å¸ƒå±€

- **è·¯å¾„ç‚¹**: P0-P9 (è¯¦è§ PRD æ–‡æ¡£)
- **å·¥ç«™**: StationA (ç»„è£…), StationB (ç„Šæ¥), StationC (æµ‹è¯•), QualityCheck (è´¨æ£€)
- **AGV**: AGV_1, AGV_2 (é€Ÿåº¦ 2.0 m/s)

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶ (MQTT ä¸»é¢˜ã€æ•°æ®ç»“æ„ç­‰)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ simulation/     # ä»¿çœŸæ ¸å¿ƒ
â”‚   â”œâ”€â”€ agent_interface/ # Agent æ¥å£
â”‚   â”œâ”€â”€ utils/          # å·¥å…·ç±»
â”‚   â””â”€â”€ main.py         # ä¸»ç¨‹åº
â”œâ”€â”€ tools/           # æµ‹è¯•å·¥å…·
â”œâ”€â”€ run_simulation.py   # ä¸»ç¨‹åºå¯åŠ¨å™¨
â””â”€â”€ run_mock_agent.py   # æµ‹è¯• Agent å¯åŠ¨å™¨
```

### ä½¿ç”¨ uv è¿è¡Œ

```bash
# âœ… æ¨èï¼šä½¿ç”¨ uv runï¼Œæ— éœ€æ‰‹åŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
uv run python run_simulation.py

# âŒ ä¸æ¨èï¼šæ‰‹åŠ¨æ¿€æ´»ç¯å¢ƒï¼ˆuv ä¸éœ€è¦è¿™æ ·åšï¼‰
# source .venv/bin/activate
# python run_simulation.py
```

### æ‰©å±•åŠŸèƒ½

1. **æ·»åŠ æ–°çš„æŒ‡ä»¤ç±»å‹**: åœ¨ `src/agent_interface/command_handler.py` ä¸­æ·»åŠ æ–°çš„å¤„ç†å‡½æ•°
2. **ä¿®æ”¹å·¥å‚å¸ƒå±€**: ç¼–è¾‘ `src/simulation/factory.py` ä¸­çš„ `MOCK_LAYOUT_CONFIG`
3. **æ·»åŠ æ–°çš„è®¾å¤‡ç±»å‹**: åœ¨ `src/simulation/entities/` ä¸­åˆ›å»ºæ–°çš„è®¾å¤‡ç±»

## ğŸ“ æ³¨æ„äº‹é¡¹

- æ¨èä½¿ç”¨æ ¹ç›®å½•çš„å¯åŠ¨è„šæœ¬ï¼ˆ`run_simulation.py`, `run_mock_agent.py`ï¼‰
- ç¡®ä¿ MQTT Broker å¯è®¿é—®

## ğŸ¯ ä¸‹ä¸€æ­¥å¼€å‘

æ ¹æ® TODO.md è§„åˆ’ï¼š
- [ ] å®ç°è®¢å•ç”Ÿæˆç³»ç»Ÿ
- [ ] æ·»åŠ æ•…éšœæ³¨å…¥æœºåˆ¶  
- [ ] å®ç° KPI è®¡ç®—å™¨
- [ ] æ·»åŠ åŠ¨æ€çº¦æŸç³»ç»Ÿ
- [ ] åˆ›å»ºé…ç½®æ–‡ä»¶åŠ è½½å™¨

## ğŸ¤ è´¡çŒ®

è¿™æ˜¯ä¸€ä¸ªé»‘å®¢æ¾é¡¹ç›®ï¼Œæ¬¢è¿å‚èµ›é€‰æ‰‹åŸºäºæ­¤ç³»ç»Ÿå¼€å‘è‡ªå·±çš„ AI Agentï¼ 